{% extends 'itom/base.html' %}{% block title %}    流量统计{% endblock %}{% block main %}<body>    <form class="layui-form" action="" lay-filter="component-form-group" method="post" >        <div class="layui-fluid">            <div class="layui-row layui-col-space15">                <div class="layui-col-md9">                    <div class="layui-card">                        <div class="layui-card-header">                            <font size="4"><strong>邮件信息</strong></font>                        </div>                        <div class="layui-card-body" style="height: 200px;">                            <div class="layui-form-item">                                <input type="hidden" name="imgbase1" value=""   autocomplete="off" placeholder="==" class="layui-input" id="picid1">                                <input type="hidden" name="imgbase2" value=""   autocomplete="off" placeholder="==" class="layui-input" id="picid2">                                <input type="hidden" name="imgbase3" value=""   autocomplete="off" placeholder="==" class="layui-input" id="picid3">                                <input type="hidden" name="imgbase4" value=""   autocomplete="off" placeholder="==" class="layui-input" id="picid4">                                <input type="hidden" name="imgbase5" value=""   autocomplete="off" placeholder="==" class="layui-input" id="picid5">                            </div>                            <div class="layui-form-item">                                <label class="layui-form-label">收件人：</label>                                <div class="layui-input-block">                                    <input type="text" name="Recipients" value="yangtianqi@tiange.com" lay-verify="myemail|required"  autocomplete="off" placeholder="请输入收件人邮箱（必填）" class="layui-input">                                </div>                            </div>                            <div class="layui-form-item">                                <label class="layui-form-label">抄送人：</label>                                <div class="layui-input-block">                                    <input type="text" name="CopySender"  value="yangtianqi@tiange.com" lay-verify="myemail|required"  autocomplete="off" placeholder="请输入抄送人邮箱" class="layui-input">                                </div>                            </div>                            <div class="layui-form-item">                                <label class="layui-form-label">描述</label>                                <div class="layui-input-block">                                    <input type="text" name="Describe" autocomplete="off" placeholder="特殊情况输入描述（可不填）" class="layui-input">                                </div>                            </div>                        </div>                    </div>                </div>            </div>        </div>        <div class="layui-fluid"  >            <div class="layui-row layui-col-space15" id="netall">                <div class="layui-col-md9">                    <div class="layui-card" id="pic1">                        <div class="layui-card-body" style="height: 480px;">                            <div id="main" style="width:1150px;height:480px"></div>                        </div>                    </div>                </div>            </div>            <div class="layui-row layui-col-space15">                <div class="layui-col-md9">                    <div class="layui-card" id="pic2">                        <div class="layui-card-body" style="height: 480px;">                            <div id="showmoining" style="width:1150px;height:480px"></div>                        </div>                    </div>                </div>            </div>            <div class="layui-row layui-col-space15">                <div class="layui-col-md9">                    <div class="layui-card" id="pic3">                        <div class="layui-card-body" style="height: 480px;">                            <div id="showafter" style="width:1150px;height:480px"></div>                        </div>                    </div>                </div>            </div>            <div class="layui-row layui-col-space15">                <div class="layui-col-md9">                    <div class="layui-card" id="pic4">                        <div class="layui-card-body" style="height: 480px;">                            <div id="showbig" style="width:1150px;height:480px"></div>                        </div>                    </div>                </div>            </div>            <div class="layui-row layui-col-space15">                <div class="layui-col-md9">                    <div class="layui-card" id="pic5">                        <div class="layui-card-body" style="height: 480px;">                            <div id="showgeneralnum" style="width:1150px;height:480px"></div>                        </div>                    </div>                </div>            </div>        </div>        <div class="layui-form-item layui-layout-admin">            <div class="layui-input-block">                <div class="layui-footer" style="left: 0;">                    <button class="layui-btn" lay-submit="" lay-filter="component-form-demo1">发送邮件</button>                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>                </div>            </div>        </div>    </form>    <script src="/static/layuiadmin/layui/layui.js"></script>    <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>    {#    Show 机房近一周总流量#}    <script type="text/javascript">        // 路径配置        require.config({            paths: {                echarts: 'http://echarts.baidu.com/build/dist'            }        });        // 使用        require(            [                'echarts',                'echarts/chart/bar', // 使用柱状图就加载bar模块，按需加载                'echarts/chart/line' // 使用折线就加载line模块，按需加载            ],            function (ec) {                // 基于准备好的dom，初始化echarts图表                var myChart = ec.init(document.getElementById('main'));                var option = {                    color: ['green','#87cefa','#da70d6','#32cd32','#6495ed','#ff69b4','#ba55d3','#cd5c5c','#ffa500','#40e0d0','#1e90ff','#ff6347','#7b68ee','#00fa9a','#ffd700','#6699FF','#ff6666','#3cb371','#b8860b','#30e0e0'],     //=====================颜色============================================                    title : {                        text: 'Show 机房近一周总流量',    //=====================标题============================================                        subtext: '单位 M'                    },                    animation: false,                    tooltip : {                        trigger: 'axis'                    },                    legend: {                        data: ['Total']    //=====================图例============================================                    },                toolbox: {                    show : true,                    feature : {                        saveAsImage : {show: true,title:'保存为图片',type:'png',lang:['点击保存']}                    }                },                calculable : true,                xAxis : [                    {                        type : 'category',                        boundaryGap : false,                        data : {{ Dates|safe }},     //=====================X轴数据============================================                        }                ],                yAxis : [                    {                        type : 'value',                        axisLabel : {                            formatter: '{value} M'                        },                        splitNumber: 10     //=====================Y轴上网格分10格============================================                    }                ],                series : [    {                        name:'Total',                        type:'line',                        itemStyle:{         //=========显示当前点数值===================                            normal:{                                label:{                                    show:true,                                    position:'top'                                }                            }                        },                        data:{{ Total_list }},                        markPoint : {       //===========显示出每个图例的最大值和最小值===================                            data : [                                {type : 'max', name: '最大值'},                                {type : 'min', name: '最小值'}                            ]                        },                    },                    ]            };            // 为echarts对象加载数据            myChart.setOption(option);            document.getElementById('picid1').value=myChart.getDataURL({pixelRatio: 2,backgroundColor: '#fff'});        }    );    </script>    {#    Show 平台上午人气峰值的流量#}    <script type="text/javascript">        // 路径配置        require.config({            paths: {                echarts: 'http://echarts.baidu.com/build/dist'            }        });        // 使用        require(            [                'echarts',                'echarts/chart/bar', // 使用柱状图就加载bar模块，按需加载                'echarts/chart/line' // 使用折线就加载line模块，按需加载            ],            function (ec) {                // 基于准备好的dom，初始化echarts图表                var myChart = ec.init(document.getElementById('showmoining'));                var option = {                    color: ['#218868','red'],                    tooltip : {                        trigger: 'axis'                    },                    title : {                        text: 'Show 平台上午人气峰值的流量',     //===标题===                    },                    animation: false,                    toolbox: {                        show : true,                        feature : {                            saveAsImage : {show: true}                        }                    },                    calculable : true,                    legend: {                        data:['人气','流量']                    },                    xAxis : [                        {                            type : 'category',                            axisLabel:{                                    interval: 0                                },                            data :{{ morn_times|safe }},                        }                    ],                    yAxis : [                        {                            type : 'value',                            name : '人气',                            axisLabel : {                                formatter: '{value} '                            },                            min: 40000,                            scale: true,                            splitNumber: 5                        },                        {                            type : 'value',                            name : '流量',                            axisLabel : {                                formatter: '{value} M'                            },                            min: 10000,                            scale: true,                            splitNumber: 10                        }                    ],                    series : [                        {                            name:'人气',                            type:'bar',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'right'                                    }                                }                            },                            //data: [61349, 64600, 57182, 57820, 61783, 61017, 61781],       //===人气数据===                            data:{{ morn_usernum |safe}}                        },                        {                            name:'流量',                            type:'line',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    }                                }                            },                            yAxisIndex: 1,                            data: {{ morn_traff|safe }},       //===流量数据===                        },                    ]                };            // 为echarts对象加载数据            myChart.setOption(option);            document.getElementById('picid2').value=myChart.getDataURL({pixelRatio: 2,backgroundColor: '#fff'});        }    );    </script>    {# Show 平台晚上人气峰值的流量#}    <script type="text/javascript">        // 路径配置        require.config({            paths: {                echarts: 'http://echarts.baidu.com/build/dist'            }        });        // 使用        require(            [                'echarts',                'echarts/chart/bar', // 使用柱状图就加载bar模块，按需加载                'echarts/chart/line' // 使用折线就加载line模块，按需加载            ],            function (ec) {                // 基于准备好的dom，初始化echarts图表                var myChart = ec.init(document.getElementById('showafter'));                var option = {                    color: ['#218868','red'],                    tooltip : {                        trigger: 'axis'                    },                    title : {                        text: 'Show 平台晚上人气峰值的流量',     //===标题===                    },                    animation: false,                    toolbox: {                        show : true,                        feature : {                            saveAsImage : {show: true}                        }                    },                    calculable : true,                    legend: {                        data:['人气','流量']                    },                    xAxis : [                        {                            type : 'category',                            data :{{ after_times|safe }},                            axisLabel:{                                    interval: 0                            },                        }                    ],                    yAxis : [                        {                            type : 'value',                            name : '人气',                            axisLabel : {                                formatter: '{value} '                            },                            min: 40000,                            scale: true,                            splitNumber: 5                        },                        {                            type : 'value',                            name : '流量',                            axisLabel : {                                formatter: '{value} M'                            },                            min: 8000,                            scale: true,                            splitNumber: 10                        }                    ],                    series : [                        {                            name:'人气',                            type:'bar',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'right'                                    }                                }                            },                            //data: [61349, 64600, 57182, 57820, 61783, 61017, 61781],       //===人气数据===                            data:{{ after_usernum |safe}}                        },                        {                            name:'流量',                            type:'line',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    }                                }                            },                            yAxisIndex: 1,                            data: {{ after_traff|safe }}      //===流量数据===                        },                    ]                };            // 为echarts对象加载数据            myChart.setOption(option);            document.getElementById('picid3').value=myChart.getDataURL({pixelRatio: 2,backgroundColor: '#fff'});        }    );    </script>    {#Show 平台房间人数和流量统计1#}    <script type="text/javascript">        // 路径配置        require.config({            paths: {                echarts: 'http://echarts.baidu.com/build/dist'            }        });        // 使用        require(            [                'echarts',                'echarts/chart/bar', // 使用柱状图就加载bar模块，按需加载                'echarts/chart/line' // 使用折线就加载line模块，按需加载            ],            function (ec) {                // 基于准备好的dom，初始化echarts图表                var myChart = ec.init(document.getElementById('showbig'));                var option = {                    color: ['green','Purple','Navy','Teal'],                    tooltip : {                        trigger: 'axis'                    },                    animation: false,                    title : {                        text: 'Show 平台房间人数和流量统计1',     //===标题===                    },                    toolbox: {                        show : true,                        feature : {                            saveAsImage : {show: true}                        }                    },                    calculable : true,                    legend: {                        data:['超大视频房间人数','大视频房间1麦人数','超大视频房间1麦人数','VIP麦人数','流量']                    },                    xAxis : [                        {                            type : 'category',                            axisLabel:{                                    interval: 0                            },                            data:{{ Point_times|safe }},                        }                    ],                    yAxis : [                        {                            type : 'value',                            name : '人气',                            axisLabel : {                                formatter: '{value} '                            },                            min: 0,                            scale: true,                            splitNumber: 5                        },                        {                            type : 'value',                            name : '流量',                            axisLabel : {                                formatter: '{value} M'                            },                            min: 9000,                            scale: true,                            splitNumber: 10                        }                    ],                    series : [    {                            name:'超大视频房间人数',                            type:'line',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    }                                }                            },                            data: {{ Avs_Over_Num|safe }}       //===人气数据===                        },{                            name:'大视频房间1麦人数',                            type:'line',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    }                                }                            },                            data: {{ Mic_Big_Num |safe }},      //===人气数据===                        },{                            name:'超大视频房间1麦人数',                            type:'line',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    }                                }                            },                            data: {{ Mic_Over_Num |safe }},       //===人气数据===                        },{                            name:'VIP麦人数',                            type:'line',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    }                                }                            },                            data: {{ Mic_Vip_Num|safe }},       //===人气数据===                        },{                        name:'流量',                        type:'line',                        itemStyle:{         //=========显示当前点数值===================                            normal:{                                label:{                                    show:true,                                    position:'top'                                },                                color:'red',                                lineStyle:{                                    color:'red',                                }                            },                        },                        yAxisIndex: 1,                        data:{{ Traffic|safe }}                    },                    ]            };            // 为echarts对象加载数据            myChart.setOption(option);            document.getElementById('picid4').value=myChart.getDataURL({pixelRatio: 2,backgroundColor: '#fff'});        }    );    </script>    {#Show 平台房间人数和流量统计2#}    <script type="text/javascript">        // 路径配置        require.config({            paths: {                echarts: 'http://echarts.baidu.com/build/dist'            }        });        // 使用        require(            [                'echarts',                'echarts/chart/bar', // 使用柱状图就加载bar模块，按需加载                'echarts/chart/line' // 使用折线就加载line模块，按需加载            ],            function (ec) {                // 基于准备好的dom，初始化echarts图表                var myChart = ec.init(document.getElementById('showgeneralnum'));                var option = {                    color: ['green','Purple','Navy','Teal'],                    tooltip : {                        trigger: 'axis'                    },                    title : {                        text: 'Show 平台房间人数和流量统计2',     //===标题===                    },                    animation: false,                    toolbox: {                        show : true,                        feature : {                            saveAsImage : {show: true}                        }                    },                    calculable : true,                    legend: {                        data:['大视频房间人数','一般房间人数','一般房间在麦人数','流量']                    },                    xAxis : [                        {                            type : 'category',                            axisLabel:{                                    interval: 0                            },                            data  :{{ Point_times|safe }},     //===X轴===                        }                    ],                    yAxis : [                        {                            type : 'value',                            name : '人气',                            axisLabel : {                                formatter: '{value} '                            },                            min: 0,                            scale: true,                            splitNumber: 5                        },                        {                            type : 'value',                            name : '流量',                            axisLabel : {                                formatter: '{value} M'                            },                            min: 9000,                            scale: true,                            splitNumber: 10                        }                    ],                    series : [    {                            name:'大视频房间人数',                            type:'line',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    }                                }                            },                            data:{{ Avs_Big_Num|safe }}  //===人气数据===                        },{                            name:'一般房间人数',                            type:'line',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    }                                }                            },                            data: {{ Avs_General_Num|safe }},       //===人气数据===                        },{                            name:'一般房间在麦人数',                            type:'line',                            barWidth:'40',                            itemStyle:{         //===显示当前点数值===                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    }                                }                            },                            data: {{ Mic_General_Num|safe }},       //===人气数据===                        },{                            name:'流量',                            type:'line',                            itemStyle:{         //=========显示当前点数值===================                                normal:{                                    label:{                                        show:true,                                        position:'top'                                    },                                    color:'red',                                    lineStyle:{                                        color:'red',                                    }                                },                            },                            yAxisIndex: 1,                            data:{{ Traffic|safe }},                    },                    ]            };            // 为echarts对象加载数据            myChart.setOption(option);            document.getElementById('picid5').value=myChart.getDataURL({pixelRatio: 2,backgroundColor: '#fff'});        }    );    </script>    <script>        layui.config({            base: '/static/layuiadmin/' //静态资源所在路径        }).extend({            index: 'lib/index' //主入口模块        }).use(['index', 'form', 'laydate'], function() {        var $ = layui.$        , admin = layui.admin        , element = layui.element        , layer = layui.layer        , laydate = layui.laydate        , form = layui.form;        form.render(null, 'component-form-group');        laydate.render({            elem: '#LAY-component-form-group-date'        });        /* 监听指定开关 */        form.on('switch(component-form-switchTest)', function (data) {        layer.msg('开关checked：' + (this.checked ? 'true' : 'false'), {offset: '132px'});        layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)        });        /* 自定义验证规则 */        form.verify({            myemail: [                /^((([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6}\;))*(([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})))$/            , '邮箱地址不符合规则'            ]        });        //监听折叠        element.on('collapse(component-panel)', function (data) {            layer.msg('展开状态：' + data.show);            });        });    </script>{% endblock %}